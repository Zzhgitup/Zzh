import{_ as s,o as a,c as e,e as n}from"./app-bebbc25d.js";const l={},i=n(`<h2 id="前提" tabindex="-1"><a class="header-anchor" href="#前提" aria-hidden="true">#</a> 前提</h2><ul><li>已经搭建好 hexo 博客，并将 hexo 部署到 GitHub</li><li>已经购买好云服务器</li><li>已经购买好域名（没有的也可以用 IP 地址访问）</li></ul><h2 id="安装宝塔面板" tabindex="-1"><a class="header-anchor" href="#安装宝塔面板" aria-hidden="true">#</a> 安装宝塔面板</h2><ul><li>可以在服务器预装系统选择 宝塔面板</li><li>或者对服务器进行重装系统<br><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/QQ截图20221120095748.png" alt="" loading="lazy"><br> 重装完成建议 重置一下服务器登录密码<br><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/QQ截图20221120100041.png" alt="" loading="lazy"></li></ul><h2 id="进入腾讯云的控制台" tabindex="-1"><a class="header-anchor" href="#进入腾讯云的控制台" aria-hidden="true">#</a> 进入腾讯云的控制台</h2><p><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/QQ截图20221120100225.png" alt="" loading="lazy"><br><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/QQ截图20221120100345.png" alt="" loading="lazy"><br> 输入 <code>sudo /etc/init.d/bt default</code> 可以查看宝塔控制面板地址，<br> 下方有账号密码，最好记录下来</p><p>进入宝塔 登录输入刚刚的账号密码<br><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/QQ截图20221120100753.png" alt="" loading="lazy"><br> 进入之后 直接点击一键安装默认推荐的软件<br><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/9b27621822492f5e864a38f1a14a4cfa.png" alt="" loading="lazy"></p><h2 id="安装并配置-git-仓库" tabindex="-1"><a class="header-anchor" href="#安装并配置-git-仓库" aria-hidden="true">#</a> 安装并配置 git 仓库</h2><p>在远程服务器上配置好 Git 仓库后，才能将本地的 hexo push 到远端。</p><ol><li>打开服务器控制台<br><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/QQ截图20221120101422.png" alt="" loading="lazy"><br> 若当前账号不是 root 则通过<code>sudo su root</code>命令切换到 root</li><li>安装 git<br><code>yum install git</code></li><li>创建 Git 账户</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">adduser git</span></span>
<span class="line"><span style="color:#abb2bf;">chmod 740 /etc/sudoers</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>编辑/etc/sudoers 文件</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">vim /etc/sudoers</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>按<code>i</code>键进入编辑模式, 找到 root ALL=(ALL) ALL 在其下方加入</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">git     ALL=(ALL)     ALL</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/QQ截图20221120101955.png" alt="" loading="lazy"><br> 输入完成后按<code>esc</code>，再输入<code>:wq</code>，保存退出</p><ol start="6"><li>更变/etc/sudoers 权限</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">chmod 400 /etc/sudoers</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="7"><li>设置 git 账户密码</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">sudo passwd git</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>注意:<code>输入密码，输入的时候是看不到任何显示的，输完回车即可</code>。</p><ol start="8"><li>切换至 <code>git 用户</code>，创建<code>~/.ssh</code>文件夹和<code>~/.ssh/authorized_keys</code>文件</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">su git</span></span>
<span class="line"><span style="color:#abb2bf;">mkdir ~/.ssh</span></span>
<span class="line"><span style="color:#abb2bf;">vim ~/.ssh/authorized_keys</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同样 i 进入编辑模式，把之前本地准备的 id_rsa.pub 文件中的公钥复制进去，按 esc 后，输入:wq 保存。 9. 更改权限</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">chmod 600 /home/git/.ssh/authorized_keys</span></span>
<span class="line"><span style="color:#abb2bf;">chmod 700 /home/git/.ssh</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>配置完成之后 接下来创建 Git 仓库</p><h2 id="创建-git-仓库" tabindex="-1"><a class="header-anchor" href="#创建-git-仓库" aria-hidden="true">#</a> 创建 Git 仓库</h2><p>在服务端控制台进行操作</p><ol><li>切换<code>root</code>用户</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">sudo su root</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>创建 repo 作为仓库目录，并加权限</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">mkdir /var/repo</span></span>
<span class="line"><span style="color:#abb2bf;">chown -R git:git /var/repo</span></span>
<span class="line"><span style="color:#abb2bf;">chmod -R 755 /var/repo</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>创建 hexo 目录作为网站根目录</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">mkdir /www/wwwroot/hexo</span></span>
<span class="line"><span style="color:#abb2bf;">chown -R git:git /www/wwwroot/hexo</span></span>
<span class="line"><span style="color:#abb2bf;">chmod -R 755 /www/wwwroot/hexo</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>创建一个空白的 git 仓库</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">cd /var/repo</span></span>
<span class="line"><span style="color:#abb2bf;">git init --bare hexo.git</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>编辑一个 Git 钩子</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">vim /var/repo/hexo.git/hooks/post-receive</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>按<code>i</code>进入编辑模式，添加下面的代码，按<code>esc</code>输入<code>:wq</code> 保存</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">#!/bin/bash</span></span>
<span class="line"><span style="color:#abb2bf;">git --work-tree=/var/hexo --git-dir=/var/repo/hexo.git checkout -f</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>更改权限</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">chown -R git:git /var/repo/hexo.git/hooks/post-receive</span></span>
<span class="line"><span style="color:#abb2bf;">chmod +x /var/repo/hexo.git/hooks/post-receive</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="宝塔网站配置" tabindex="-1"><a class="header-anchor" href="#宝塔网站配置" aria-hidden="true">#</a> 宝塔网站配置</h2><p>点击添加站点<br><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/QQ截图20221120103418.png" alt="" loading="lazy"><br> 配置<br><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/QQ截图20221120103313.png" alt="" loading="lazy"><br> 根目录 选择刚刚创建的 hexo 文件夹<br> 点击提交</p><h2 id="本地推送" tabindex="-1"><a class="header-anchor" href="#本地推送" aria-hidden="true">#</a> 本地推送</h2><p>在博客目录中配置</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">deploy:</span></span>
<span class="line"><span style="color:#abb2bf;">  type: git</span></span>
<span class="line"><span style="color:#abb2bf;">  repo: git@服务器ip或域名:/var/repo/hexo.git</span></span>
<span class="line"><span style="color:#abb2bf;">  branch: master</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置完成后，可直接 hexo 三连到自己的服务器。简单快捷。</p><p>之后就能通过服务器 IP 地址，访问博客了 默认是 80 端口<br> 所以直接输入服务器 IP 就能访问了</p>`,49),o=[i];function d(c,r){return a(),e("div",null,o)}const p=s(l,[["render",d],["__file","hexo部署.html.vue"]]);export{p as default};
